---
status: testing
phase: 02-frontend
source:
  - .planning/phases/02-frontend/02-11-SUMMARY.md
  - .planning/phases/02-frontend/02-12-SUMMARY.md
started: 2026-02-06T18:00:00Z
updated: 2026-02-06T18:00:00Z
---

## Current Test

number: 1
name: Long-Press Opens "Pourquoi cet article?" Sheet
expected: |
  When you long-press (hold for ~1 second) on any digest article card:
  1. You feel a haptic vibration (light tap)
  2. A bottom sheet slides up from the bottom
  3. Sheet title: "Pourquoi cet article?"
  4. Header shows total score badge (e.g., "245 pts")
  5. List of scoring contributions (reasons why it was selected)
awaiting: user response

## Tests

### 1. Long-Press Opens "Pourquoi cet article?" Sheet
expected: Long-press on digest article opens bottom sheet with "Pourquoi cet article?" title and scoring breakdown
result: pending

### 2. Scoring Breakdown Display
expected: |
  Sheet shows detailed breakdown with:
  1. Label for each contribution (e.g., "Correspond à vos thèmes", "Source fiable", "Bonus récence")
  2. Points value for each (e.g., "+70 pts", "+40 pts")
  3. Green trendUp icon for positive contributions
  4. Red trendDown icon for negative contributions (if any penalties)
result: pending

### 3. Total Score Display
expected: Header shows prominent total score badge with sum of all contributions (e.g., "245 pts")
result: pending

### 4. Actions in Reasoning Sheet
expected: |
  Bottom of sheet has action buttons:
  1. "Masquer cette source" - mutes the article's source
  2. "Masquer ce thème" - mutes the article's theme
result: pending

### 5. Backward Compatibility - Legacy Articles
expected: |
  Articles WITHOUT reasoning data (legacy/fallback articles):
  1. Long-press does nothing OR shows graceful empty state
  2. App does NOT crash
result: pending

### 6. Not Interested Action Opens Confirmation Sheet
expected: |
  When you tap the "moins voir..." (eye-slash) button on an article:
  1. Bottom sheet slides up
  2. Sheet explains this will hide the article and reduce similar content
  3. Has "Confirmer" and "Annuler" buttons
  4. DOES NOT immediately remove the article without confirmation
result: issue
reported: "Sheet opens but shows 'Information non disponible' instead of confirmation content"
severity: major

### 7. Not Interested Confirmation Works
expected: |
  After tapping "Confirmer" in the Not Interested sheet:
  1. Sheet closes
  2. Article card dims (opacity ~60%)
  3. Progress bar updates
  4. "Masqué" badge appears on card
result: pending

### 8. Save Action Works
expected: |
  When you tap the bookmark icon (Sauvegarder):
  1. Icon changes to filled state
  2. Toast confirms "Article sauvegardé"
  3. Card does NOT dim
  4. Progress bar does NOT update
result: pending

### 9. Tap Article to Read
expected: |
  Tapping anywhere on the article card (not buttons):
  1. Opens full article detail screen
  2. Article is automatically marked as "Lu"
  3. Card dims when you return to digest
result: pending

### 10. Digest Loads Successfully
expected: |
  Opening the digest screen:
  1. 5 articles load without errors
  2. Progress bar shows current status
  3. No crashes or loading spinners forever
result: pending

## Summary

total: 10
passed: 0
issues: 1
pending: 9
skipped: 0

## Gaps

- truth: "Not Interested action shows confirmation sheet explaining consequences"
  status: failed
  reason: "User reported: Sheet opens but shows 'Information non disponible' instead of confirmation content"
  severity: major
  test: 6
  root_cause: "Wrong sheet is being shown - DigestPersonalizationSheet (for 'Pourquoi cet article?') is opened instead of a Not Interested confirmation sheet"
  artifacts:
    - path: "apps/mobile/lib/features/digest/screens/digest_screen.dart"
      issue: "_handleNotInterested() directly opens DigestPersonalizationSheet instead of showing confirmation first"
      lines: "139-148"
    - path: "apps/mobile/lib/features/digest/widgets/digest_personalization_sheet.dart"
      issue: "Sheet shows 'Information non disponible' when recommendationReason is null"
      lines: "24-26, 252-290"
  missing:
    - "Create NotInterestedConfirmationSheet widget with explanation text and Confirm/Cancel buttons"
    - "Modify _handleNotInterested() to show confirmation sheet first"
    - "Only after confirmation, apply the not_interested action and optionally show personalization sheet"
  fix_hint: |
    Two approaches:
    1. Create new NotInterestedConfirmationSheet widget
    2. Or modify DigestPersonalizationSheet to accept a 'mode' parameter (reasoning vs confirmation)
