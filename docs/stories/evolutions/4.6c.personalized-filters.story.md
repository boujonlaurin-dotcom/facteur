# Story 4.6c: Filtres feed personnalisés selon onboarding

**Parent Story:** [[4.6b.filtres-v2.story.md]]  
**Epic:** 4 - Feed & Algorithme  
**Classification:** EVOLUTION

---

## Description

**En tant qu'** utilisateur ayant complété l'onboarding,  
**Je veux** que l'ordre des filtres du feed soit adapté à mes réponses,  
**afin de** voir en priorité les filtres qui correspondent à mon profil.

---

## Contexte

Actuellement, les filtres du feed (`FilterBar`) sont statiques:
1. Dernières news
2. Rester serein  
3. Changer de perspective
4. Longs formats

Cette story lie l'ordre/visibilité des filtres aux réponses du questionnaire onboarding pour une personnalisation plus fine.

---

## Critères d'acceptation

### Mapping Onboarding → Filtres

| Réponse Onboarding | Filtre prioritaire | Logique |
|-------------------|-------------------|---------|
| `objective = 'learn'` | "Longs formats" 1er | Utilisateur veut apprendre en profondeur |
| `responseStyle = 'decisive'` | "Dernières news" 1er | Préfère l'info directe et rapide |
| `responseStyle = 'nuanced'` | "Rester serein" 1er | Préfère éviter les sujets anxiogènes |
| `personalGoal = null` | "Objectif" masqué | Pas de goal défini = pas de filtre pertinent |

### Critères techniques

1. ✅ Création d'un `personalizedFiltersProvider` qui retourne `List<FilterConfig>`
2. ✅ Le provider dépend de `userProfileProvider` (réponses onboarding stockées)
3. ✅ `FilterBar` reçoit la liste ordonnée depuis le provider
4. ✅ Fallback: si pas de profil, ordre par défaut
5. ✅ Tests unitaires du provider

---

## Modèle de données

```dart
class FilterConfig {
  final String key;      // 'breaking', 'inspiration', etc.
  final String label;    // 'Dernières news', etc.
  final bool isVisible;
  final int priority;    // 0 = premier
  
  const FilterConfig({...});
}
```

---

## Implémentation technique

### Fichiers modifiés
- `apps/mobile/lib/features/feed/widgets/filter_bar.dart` - Accepter liste dynamique
- `apps/mobile/lib/features/feed/providers/` - Nouveau `personalized_filters_provider.dart`

### Fichiers de test
- `apps/mobile/test/features/feed/personalized_filters_provider_test.dart`

---

## Vérification

- [ ] Test unitaire: provider retourne ordre correct selon profil
- [ ] Test unitaire: fallback fonctionne sans profil
- [ ] Test visuel: vérifier l'ordre des chips sur simulateur
