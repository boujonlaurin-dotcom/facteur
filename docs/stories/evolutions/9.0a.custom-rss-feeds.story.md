# Story 9.0a: Ajout de sources personnalisées (RSS/Substack)

**Epic:** 9 - Open Sources
**Classification:** EVOLUTION

---

## Description

**En tant que** "Curious Explorer" (Utilisateur),
**Je veux** pouvoir ajouter n'importe quel flux RSS ou Podcast via son URL,
**afin de** centraliser toute ma veille d'information dans Facteur, même pour des sources de niche non listées dans le catalogue officiel.

---

## Contexte

Actuellement, Facteur ne propose qu'un catalogue "Curated" de sources validées. Pour devenir l'application de lecture ultime, l'utilisateur doit pouvoir s'approprier son feed en ajoutant ses propres sources ("Open Web").

---

## Critères d'acceptation (Mise à jour Janvier 2026)

### 1. Ajout de Source & "Smart Detect"
- ✅ **URL Directe** : L'utilisateur peut coller une URL de flux (RSS/Atom/Podcast/Substack).
- ✅ **Auto-Découverte (Smart Detect)** : Si l'utilisateur colle une URL de site classique, le système tente de trouver automatiquement le lien RSS.
- ✅ **Prévisualisation** : Affichage temps réel du **Thème deviné** (Auto-theme) et des 3 derniers articles.
- ⚠️ **YouTube Decommissioning** : Les URLs YouTube sont explicitement rejetées avec un message pédagogique (V0 focalisée sur RSS/Journaux).

### 2. Synchronisation & UX
- ✅ **Synchronisation Immédiate** : Dès l'ajout, une synchro est lancée en tâche de fond.
- ✅ **Feedback Temporel** : L'utilisateur est informé que ses articles apparaîtront sous 1-2 minutes.

### 3. Scoring & Recommandation
- ✅ **Source de Confiance par défaut** : Toute source manuelle est marquée comme suivie.
- ✅ **Bonus Source Personnalisée** : Boost systématique de **+10 pts** pour récompenser l'effort d'ajout.
- ✅ **Auto-Theme** : Classification automatique dans l'un des 8 thèmes majeurs pour intégration immédiate dans l'algorithme.

---

## Implémentation technique

- **Backend** :
    - `SourceService.detect_source(url)` : Détection + Auto-thème par mots-clés.
    - `POST /sources/custom` : Enregistrement + Sync immédiat + Migration thèmes "custom" rétroactive.
    - `CoreLayer` : Application du bonus `CUSTOM_SOURCE_BONUS` (+10).
- **Frontend** :
    - `SourcePreviewCard` : Affiche le thème détecté (ex: "TECH & FUTUR").

---

## Vérification
- [x] Test manuel : Ajouter un flux RSS valide (ex: Vert.eco).
- [x] Test manuel : Vérifier le rejet d'une chaîne YouTube.
- [x] Test manuel : Vérifier que le thème est correctement deviné et affiché par le mobile.
- [x] Commande One-liner : `./docs/qa/scripts/verify_sources_v2_final.sh`
