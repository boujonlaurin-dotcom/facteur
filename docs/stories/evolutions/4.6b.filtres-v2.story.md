# Story 4.6b : AmÃ©lioration des Filtres Feed (V2)

> **Parent Story**: [[../core/4.6.filtres-rapides.story.md]]  
> **Type**: Evolution

## Status: Draft ðŸ“

## Story

**As a** utilisateur,  
**I want** comprendre ce que chaque filtre fait avant de l'utiliser,  
**so that** je puisse choisir le mode de lecture adaptÃ© Ã  mon intention du moment.

## Acceptance Criteria

### Phase 1 : Descriptions courtes (Frontend)
1. [ ] Affichage d'une description courte (1 ligne max) sous les chips aprÃ¨s sÃ©lection
2. [ ] Animation fade-in/out de la description
3. [ ] Descriptions statiques pour `breaking`, `inspiration`, `deep_dive`
4. [ ] Description **dynamique** pour `perspectives` basÃ©e sur le biais utilisateur

### Phase 2 : Logique backend affinÃ©e
1. [ ] **breaking** : RÃ©duction de 24h â†’ 12h
2. [ ] **deep_dive** : Ajouter articles avec `reading_time_minutes > 10`
3. [ ] Nouvel endpoint `/api/user/bias` pour rÃ©cupÃ©rer le biais utilisateur cÃ´tÃ© client

### Phase 3 : Classification Mood (V2)
1. [ ] Nouveau champ `mood` sur le modÃ¨le `Source` (enum: positive, neutral, hard_news)
2. [ ] Migration des sources curÃ©es avec classification manuelle initiale
3. [ ] **inspiration** utilise `mood = 'positive'` au lieu de l'exclusion de thÃ¨mes

## Classification Mood proposÃ©e

| Mood | CritÃ¨res | Exemples |
|------|----------|----------|
| `positive` | RÃ©cits humains, solutions, slow journalism | Transfert, Les Pieds sur Terre, Sismique, Bon Pote |
| `neutral` | Vulgarisation, analyse, documentaire | ScienceÃ‰tonnante, Heu?reka, The Conversation, Le Dessous des Cartes |
| `hard_news` | ActualitÃ© chaude, politique, Ã©conomie courante | Le Monde, Mediapart, Les Ã‰chos, Politico, LibÃ©ration |

## Technical Notes

### Frontend (filter_bar.dart)
```dart
const filterDescriptions = {
  'breaking': 'Les actus de moins de 12h',
  'inspiration': 'Loin des sujets chauds',
  'deep_dive': 'Contenus de plus de 10 min',
  // 'perspectives' est dynamique via provider
};
```

### Backend (recommendation_service.py)
```python
# BREAKING: 12h + Hard News Themes
limit_date = datetime.datetime.utcnow() - datetime.timedelta(hours=12)
query = query.where(
    and_(
        Content.published_at >= limit_date,
        Source.theme.in_(['society', 'international', 'economy', 'politics'])
    )
)
```

## Dependencies
- Story 4.1 (Algorithme de tri) âœ…
- Story 4.2 (Feed principal) âœ…

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 15/01/2026 | 1.0 | Initial Draft | Antigravity |
