---
title: Add Source 2.0 MVP
status: implementation
type: epic
priority: high
epic: 12.add-source-2.0
---

# Epic 12: Add Source 2.0 MVP

Le flow d'ajout de source actuel est trop limité et ne prend pas en compte les utilisateurs qui ne connaissent pas l'URL exact du flux RSS, ou qui n'ont simplement pas d'inspiration.
L'objectif de cet Epic est d'aller plus loin pour réduire un maximum la friction en utilisant l'Auto-Discovery déjà implémenté (pour les URL simples), et d'orienter l'utilisateur (empty state dynamique, et recherche intelligente).

## Features

- [ ] **Trending Sources** : Exposition des sources les plus populaires de la plateforme sur l'écran d'accueil Add Source, permettant d'ajouter en 1-clic.
- [ ] **Intelligent Search** : Capacité à chercher une source en tapant un mot-clé au lieu d'une URL exact via le champ de recherche. Recherche dans notre propre base + fallbacks potentiels.
- [ ] **Empty State Amélioré** : Textes plus impactants sur les possibilités ("Substack, YouTube, Blogs...") et ajout d'un filet de sécurité vers l'annuaire "AtlasFlux" en webview sortant.

## Technical Approach

### Backend
1. Création de `GET /api/sources/trending` dans le router `sources.py`, requêtant la base `UserSource` triée par count avec le `SourceService`.
2. Refactoring de l'endpoint de vérification / ajout pour accepter un paramètre url ou query. La logique sera :
    - Si query est une URl: on garde `rss_parser.detect()`.
    - Si query est un mot clé: on fait un `ILIKE` sur `Source.url` ou `Source.name` sur la table Source.

### Mobile
1. Riverpod: Ajout des providers `trendingSourcesProvider` et de l'appel search.
2. `AddSourceScreen` : redesign pour supporter un état vide avec le "Top Communauté", des textes "punchy" et AtlasFlux.
3. Affichage d'une liste de `SourcePreviewCard` en cas de recherche par mot clé.
4. Conservation de l'unicité de la `SourcePreviewCard` lors de l'Auto-Discovery pour valider.
