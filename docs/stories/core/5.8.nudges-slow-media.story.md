# Story 5.8: Nudges "Slow Media"

## Status: Bugged üêõ

## Story

**As a** utilisateur,  
**I want** recevoir des feedbacks sur ma consommation quotidienne et savoir quand je suis √† jour,  
**so that** je puisse consommer l'information de mani√®re plus intentionnelle sans tomber dans le scroll infini.

## Acceptance Criteria

1. **Compteur Unifi√©** : Affichage d'un indicateur "X / Y lus" (hebdomadaire) clair et concis dans le header, rempla√ßant les compteurs s√©par√©s (FR10quater).
2. **Indicateur "Tu es √† jour"** : Affichage d'une card inline ("CaughtUpCard") apr√®s ‚â•8 articles consomm√©s [Source: prd.md#FR10quater]
3. **Blocage du scroll** : Le feed ne charge pas les √©l√©ments au-del√† de la carte "Tu es √† jour" tant que l'utilisateur n'a pas tap√© dessus pour continuer [Finitude]
4. **Dismissable** : Apr√®s tap sur la carte, celle-ci dispara√Æt et le scroll complet du feed est d√©bloqu√© [Source: prd.md#FR10quater]
5. **Finitude** : Renforcer le sentiment d'avoir termin√© sa "tourn√©e du jour" via le blocage visuel [Source: prd.md#Principes directeurs]
6. **Analytics** : Tracking de la profondeur de scroll et du marquage "Caught Up" pour mesurer l'engagement slow media.

## Tasks / Subtasks

- [x] **Task 1: Cr√©ation du widget CaughtUpCard**
    - [x] Design minimaliste avec ic√¥ne ‚òï
    - [x] Animation d'entr√©e et de sortie (fade/scale)
    - [x] Logique de dismissal locale (session state)
- [x] **Task 2: UI Header Raffin√©e**
    - [x] Consoliditation des compteurs quotidien/hebdo en un seul widget `DailyProgressIndicator`
    - [x] Format "39 / 10 lus" pour clart√© maximale
- [x] **Task 3: Int√©gration dans le FeedScreen**
    - [x] Calcul du seuil (8 articles)
    - [x] Insertion de la card √† l'index 3 (apr√®s les premiers articles)
- [x] **Task 4: Analytics**
    - [x] Tracking `trackFeedScroll` √† la fermeture (max depth, items viewed)
    - [x] Tracking `trackFeedComplete` √† l'apparition/vue de la card "Tu es √† jour"

## Known Bugs üêõ

### Bug: Blocage du scroll apr√®s dismiss de CaughtUpCard
**Status**: Non r√©solu  
**Date**: 24/01/2026  
**Description**: Apr√®s avoir cliqu√© sur la carte "Tu es √† jour" pour continuer, le scroll se bloque √† nouveau environ 8 articles plus loin, sans affichage de carte pour d√©bloquer. L'utilisateur reste bloqu√© sans raison apparente.

**Comportement attendu**: Apr√®s dismiss de la carte, le feed devrait √™tre enti√®rement scrollable sans aucun blocage.

**Pistes non r√©solues**:
- Modification du `effectiveChildCount` (limit√© vs normal)
- Ajout de Key sur le SliverList pour forcer rebuild
- Appel de `loadMore()` au dismiss
- Diff√©rentes logiques de calcul `contentOffset`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 14/01/2026 | 1.0 | Cr√©ation initiale et compl√©tion (BMAD Compliance) | Antigravity |
| 14/01/2026 | 1.1 | Raffinement UI Header (Merge compteurs) | Antigravity |
| 24/01/2026 | 1.2 | Tentative blocage scroll (Finitude) - BUGGED | Agent |