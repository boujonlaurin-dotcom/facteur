# Story 4.6: Filtres Rapides

## Status: Done ✅

## Story
**As a** utilisateur,
**I want** filtrer mon feed par type ou thème,
**so that** je puisse me concentrer sur ce que je veux consommer (ex: écouter un podcast, lire un article, ou explorer un thème précis).

## Acceptance Criteria
- [x] **UI Component**: Une barre de filtres horizontale ("Chips") en haut du feed (sous le header).
- [x] **Filter Types**:
    1. **Format**: "Tous", "À lire" (Articles), "À écouter" (Podcasts), "À voir" (Vidéos).
    2. **Thème**: (Optionnel pour ce MVP, se focus sur le Type en priorité selon PRD, mais PRD mentionne "type et thème").
- [x] **Interaction**:
    - Tap sur une chip -> Filtre la liste.
    - Chip active mise en évidence (couleur accent).
    - "Tous" sélectionné par défaut.
- [x] **Feedback**: La liste se met à jour instantanément (filtrage local ou API).
- [x] **Persistence**: Le filtre est temporaire (reset au reload app) OU persistant ? (PRD ne précise pas, partons sur temporaire pour MVP).

## Tasks / Subtasks

- [x] **Task 1: Architecture & State**
    - [x] Update `FeedNotifier` (State) to include `selectedFilter` (Enum: ALL, READ, LISTEN, WATCH).
    - [x] Update `FeedState` to hold filtered list vs full list (or getter).

- [x] **Task 2: UI Components**
    - [x] Create `FilterBar` widget (Horizontal `ListView` of `ChoiceChip` or custom Widget).
    - [x] Integrate `FilterBar` into `FeedScreen` (SliverAppBar or sticky header).

- [x] **Task 3: Logic Implementation**
    - [x] Implement filtering logic in `FeedNotifier`.
        - Use `content_type` field from `Content` model.
        - Mapping:
            - `READ` -> `ARTICLE`
            - `LISTEN` -> `PODCAST`
            - `WATCH` -> `VIDEO`

- [x] **Task 4: Testing**
    - [x] Verify filtering works for mixed content.
    - [x] Verify "Tous" resets the view.
    - [x] Verify Empty State if no content matches filter.

## Dev Notes
- **API vs Local**: PRD says "Mise à jour instantanée". Since we pagination, local filtering only works on *loaded* items, which is bad UX (might show 0 items).
- **Recommendation**: Ideally pass filter to API `/api/feed?type=article`.
    - If efficient, Client-side filter is instant but problematic with pagination.
    - **Decision**: Check `Story 4.1` implementation. If `/api/feed` supports filtering, use it. Else, implement API support.
    - *Amendment to Task 1*: Check backend support for filtering. If missing, add `type` parameter to `/api/feed`.
