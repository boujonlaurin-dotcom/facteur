ðŸ› ï¸ Diagnostic: Available environment variables: ['ANTIGRAVITY_AGENT', 'ANTIGRAVITY_CLI_ALIAS', 'BUNDLED_DEBUGPY_PATH', 'COLORTERM', 'COMMAND_MODE', 'CORS_ORIGINS', 'DATABASE_URL', 'DEBUG', 'ENVIRONMENT', 'GIT_ASKPASS', 'HOME', 'HOMEBREW_CELLAR', 'HOMEBREW_PREFIX', 'HOMEBREW_REPOSITORY', 'HOST', 'INFOPATH', 'LANG', 'LOGNAME', 'MallocNanoZone', 'ORIGINAL_XDG_CURRENT_DESKTOP', 'OSLogRateLimit', 'PAGER', 'PATH', 'PORT', 'PWD', 'PYDEVD_DISABLE_FILE_VALIDATION', 'PYTHONSTARTUP', 'PYTHON_BASIC_REPL', 'REVENUECAT_API_KEY', 'REVENUECAT_WEBHOOK_SECRET', 'RSS_SYNC_ENABLED', 'RSS_SYNC_INTERVAL_MINUTES', 'SENTRY_DSN', 'SHELL', 'SHLVL', 'SSH_AUTH_SOCK', 'SUPABASE_ANON_KEY', 'SUPABASE_JWT_SECRET', 'SUPABASE_SERVICE_ROLE_KEY', 'SUPABASE_URL', 'TERM', 'TERM_PROGRAM', 'TERM_PROGRAM_VERSION', 'TMPDIR', 'USER', 'USER_ZDOTDIR', 'VIRTUAL_ENV', 'VIRTUAL_ENV_PROMPT', 'VSCODE_DEBUGPY_ADAPTER_ENDPOINTS', 'VSCODE_GIT_ASKPASS_EXTRA_ARGS', 'VSCODE_GIT_ASKPASS_MAIN', 'VSCODE_GIT_ASKPASS_NODE', 'VSCODE_GIT_IPC_HANDLE', 'VSCODE_INJECTION', 'VSCODE_PROFILE_INITIALIZED', 'VSCODE_PYTHON_AUTOACTIVATE_GUARD', 'XPC_FLAGS', 'XPC_SERVICE_NAME', 'ZDOTDIR', '_', '__CFBundleIdentifier', '__CF_USER_TEXT_ENCODING']
2026-01-20 10:58:36 [info     ] engine_initializing            target='aws-1-eu-west-1.pooler.supabase.com:6543/postgres?sslmode=require'
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade k8l9m0n1o2p3 -> a4b5c6d7e8f9, add_daily_top3_table_and_une_feed_url
Traceback (most recent call last):
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 673, in execute
    result = self.await_(self._cursor.execute(query, params, **kw))
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/psycopg/cursor_async.py", line 117, in execute
    raise ex.with_traceback(None)
psycopg.errors.QueryCanceled: canceling statement due to statement timeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/./venv/bin/alembic", line 9, in <module>
    sys.exit(main())
             ~~~~^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/config.py", line 1047, in main
    CommandLine(prog=prog).main(argv=argv)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/config.py", line 1037, in main
    self.run_cmd(cfg, options)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/config.py", line 971, in run_cmd
    fn(
    ~~^
        config,
        ^^^^^^^
        *[getattr(options, k, None) for k in positional],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        **{k: getattr(options, k, None) for k in kwarg},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/command.py", line 483, in upgrade
    script.run_env()
    ~~~~~~~~~~~~~~^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/script/base.py", line 545, in run_env
    util.load_python_file(self.dir, "env.py")
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/util/pyfiles.py", line 116, in load_python_file
    module = load_module_py(module_id, path)
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/util/pyfiles.py", line 136, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 762, in exec_module
  File "<frozen importlib._bootstrap>", line 491, in _call_with_frames_removed
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/alembic/env.py", line 96, in <module>
    run_migrations_online()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/alembic/env.py", line 90, in run_migrations_online
    asyncio.run(run_async_migrations())
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0_1/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/alembic/env.py", line 83, in run_async_migrations
    await connection.run_sync(do_run_migrations)
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/ext/asyncio/engine.py", line 888, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/alembic/env.py", line 63, in do_run_migrations
    context.run_migrations()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 8, in run_migrations
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/runtime/environment.py", line 969, in run_migrations
    self.get_context().run_migrations(**kw)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/runtime/migration.py", line 626, in run_migrations
    step.migration_fn(**kw)
    ~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/alembic/versions/a4b5c6d7e8f9_add_daily_top3_table_and_une_feed_url.py", line 47, in upgrade
    op.add_column('sources', sa.Column('une_feed_url', sa.Text(), nullable=True))
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 8, in add_column
  File "<string>", line 3, in add_column
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/operations/ops.py", line 2186, in add_column
    return operations.invoke(op)
           ~~~~~~~~~~~~~~~~~^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/operations/base.py", line 454, in invoke
    return fn(self, operation)
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/operations/toimpl.py", line 175, in add_column
    operations.impl.add_column(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        table_name,
        ^^^^^^^^^^^
    ...<3 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/ddl/impl.py", line 388, in add_column
    self._exec(
    ~~~~~~~~~~^
        base.AddColumn(
        ^^^^^^^^^^^^^^^
    ...<4 lines>...
        )
        ^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/alembic/ddl/impl.py", line 256, in _exec
    return conn.execute(construct, params)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/sql/ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
        dialect,
    ...<4 lines>...
        compiled,
    )
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 673, in execute
    result = self.await_(self._cursor.execute(query, params, **kw))
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/laurinboujon/Desktop/Projects/Work Projects/Facteur/packages/api/venv/lib/python3.14/site-packages/psycopg/cursor_async.py", line 117, in execute
    raise ex.with_traceback(None)
sqlalchemy.exc.OperationalError: (psycopg.errors.QueryCanceled) canceling statement due to statement timeout
[SQL: ALTER TABLE sources ADD COLUMN une_feed_url TEXT]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
