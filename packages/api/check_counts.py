from app.database import engine; from app.models.content import Content; from sqlalchemy import select, func; import asyncio; async def count(): async with engine.connect() as conn: res = await conn.execute(select(func.count(Content.id))); print(f'Total contents: {res.scalar()}'); res = await conn.execute(select(func.count(Content.id)).where(Content.published_at >= func.now() - func.cast('24 hours', func.interval))); print(f'Last 24h contents: {res.scalar()}'); asyncio.run(count())
